package com.example.ext_mateuszbratkows.androidmalwaredetec.data.local;

import com.example.ext_mateuszbratkows.androidmalwaredetec.data.ApplicationInfoDataSource;
import com.example.ext_mateuszbratkows.androidmalwaredetec.data.local.database.LocalDbDataSource;
import com.example.ext_mateuszbratkows.androidmalwaredetec.data.local.json.LocalJsonDataSource;
import com.example.ext_mateuszbratkows.androidmalwaredetec.data.local.models.ApplicationInfoModelTest;

import java.util.List;

import rx.Observable;

/**
 * Created by ext_mateusz.bratkows on 2016-05-22.
 */
public class ApplicationInfoLocalDataSource implements ApplicationInfoDataSource {


    private LocalDbDataSource mDbDataSource;
    private LocalJsonDataSource mJsonDataSource;

    public ApplicationInfoLocalDataSource(LocalDbDataSource mDbDataSource, LocalJsonDataSource mJsonDataSource) {
        this.mDbDataSource = mDbDataSource;
        this.mJsonDataSource = mJsonDataSource;
    }

    @Override
    public Observable<List<ApplicationInfoModelTest>> loadApplicationList() {
        Observable<List<ApplicationInfoModelTest>> jsonApplicationList = mJsonDataSource.loadApplicationList();
        Observable<List<ApplicationInfoModelTest>> dbApplicationList = mDbDataSource.loadApplicationList();
        return Observable.concat(jsonApplicationList, dbApplicationList).first();
    }

    @Override
    public void saveApplicationList(List<ApplicationInfoModelTest> mApplicationList) {
        mDbDataSource.saveApplicationList(mApplicationList);
        mJsonDataSource.saveApplicationList(mApplicationList);

    }

    @Override
    public void saveMalwareList(List<ApplicationInfoModelTest> mApplicationList) {
        mDbDataSource.saveMalwareList(mApplicationList);
    }

    @Override
    public void updateApplicationList(List<ApplicationInfoModelTest> mApplicationList) {

    }


}
